@model List<Accepted>

@{
    ViewData["Title"] = "Index";
}

@if (TempData.ContainsKey("ErrorMessage"))
{
    <div class="alert alert-danger" role="alert">
        @TempData["ErrorMessage"]
    </div>
}

@if (TempData.ContainsKey("Success"))
{
    <div class="alert alert-success" role="alert">
        @TempData["Success"]
    </div>
}
<div class="row">
 <div class="col-sm-5"> <span>
    
     <a class="btn btn-success" asp-controller="Reports" asp-action="AcceptedExcel" style="margin-right: 1vw;margin-top:2vw">
           <i class="bi bi-filetype-xls" style="font-size: 2rem;"></i>
            </a> 
            <p>
         تصدير قائمة المقبولين الى xlsx
    </p>
</span> </div>

 <div class="col-sm-4">
<div class="page-header">
<h5>قائمة المقبولين</h5>
</div> 

 </div>
</div>



<div class="container-fluid" style="margin-top: 5vw; margin-bottom:15vw">
    <div class="row">
       
         <div class="col-sm-2" style="border: 0.2vw solid rgb(244, 228, 6);border-radius: 0.3vw 0.3vw; ">

             <ul class="nav nav-pills">
        <li class="nav-item">
            
         <a class="btn btn-success" style="width: 12vw;"   asp-controller="Admin" asp-action="AllUsers"> المستفيدين</a>

        </li>
        <li class="nav-item">
            <a class="btn btn-success" style="width: 12vw;"  asp-controller="Admin" asp-action="AllClerks"> المشرفين</a>
        </li>
        
        @* <li class="nav-item">
            <a class="btn btn-success" style="width: 12vw;"  asp-controller="Admin" asp-action="EditPoints"> استعلام عن مدينة </a>
        </li> *@

        <li class="nav-item">
            <a class="btn btn-success" style="width: 12vw;"  asp-controller="Admin" asp-action="EditPoints"> النقاط</a>
        </li>
        
    </ul>
        </div>
        
        <div class="col-sm-9">
            <div class="container-fluid">
            <table class="table table-striped table-hover" id="exampleh">
                    <thead>
                        <tr>
                            <th style="text-align: right;" >الاسم</th>
                            <th style="text-align: right;" >رقم الهوية</th>
                            <th style="text-align: right;" >المدينة </th>
                            <th style="text-align: right;" >رقم الجوال</th>
                            <th style="text-align: right;" >العنوان</th>
                            <th style="text-align: right;" >النقاط</th>
                            <th style="text-align: right;" >
                                @* <a class="btn btn-info" asp-controller="Register" asp-action="register">اضافة</a> *@
                            </th>
                            <th style="text-align: right;" ></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>@item.name</td>
                                <td>@item.userId</td>
                                <td>@item.city</td>
                                <td>@item.phone</td>
                                <td>@item.fullAddress</td>
                                <td>@item.points</td>
                                <td>
                                    <a class="btn btn-warning" asp-controller="Clerk" asp-action="Review" asp-route-id="@item.userId">مراجعة</a>
                                </td>
                                  <td>

                                    @if(!item.isApproved) {
                                     <a class="btn btn-success" asp-controller="Accepted" asp-action="AcceptedReport" asp-route-id="@item.userId">انشاء دفعة مالية</a>
                                    }
                                    else{
                                     <a class="btn btn-primary" asp-controller="Reports" asp-action="UserReports" asp-route-id="@item.userId"> التقارير المالية</a>

                                    }

                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>


    </div>
</div>
@section Scripts{
    <script>
        
  new DataTable('#exampleh');


    </script>
}