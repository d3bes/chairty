@model User

@{
    ViewData["Title"] = "التسجيل كمستفيد";
}

<div class="container">
        <div class="row">
            <div class="col-sm-2"></div>
            <div class="col-sm-8">
        <h3 class="mt-5"> التسجيل كمستفيد</h3>
        <form asp-action="Upload" asp-controller="Register"  class="mt-4" method="post" enctype="multipart/form-data">

            <div class="form-group">
                <label>الاسم رباعي: <span class="text-danger">*</span></label>
                <input type="text" name="fullName" asp-for="fullName" class="form-control" required>
            </div>

            <div class="form-group">
                <label>رقم الهوية : <span class="text-danger">*</span></label>
                <input type="text" asp-for="id" name="id" class="form-control" required>
            </div>


            <div class="form-group">
                <label>تاريخ الميلاد: <span class="text-danger">*</span> </label>
                <input type="date" asp-for="birthDate" name="birthDate" class="form-control" required>
            </div>


            <div class="form-group">
                <label>رقم الجوال: <span class="text-danger">*</span></label>
                <div class="input-group">
                    <span class="input-group-text">+966</span>
                    <input type="number" asp-for="phone" name="phone" class="form-control" required>
                </div>
            </div>

          <div class="form-group">
                <label>العنوان بالكامل: <span class="text-danger">*</span> </label>
                <input type="text" name="fullAddress" asp-for="fullAddress" class="form-control" required>
            </div>
            <div class="form-group">
                <label>المدينة: <span class="text-danger">*</span> </label>
                <input type="text" name="city" asp-for="city" class="form-control" required>
            </div>
            @* الهوية الشخصية صورة*@
            
             <div class="form-group">
                <label>صورة من الهوية الشخصية: <span class="text-danger">*</span></label>
                <input type="file" id="id_image"  asp-for="id_image"  onchange="previewImage('id_image','idImagePreview')"  name="id_image"  class="form-control" accept="image/*" required/>
               <div class="image-preview" id="idImagePreview">
                <img src="" alt="الصورة الشخصية" class="image-preview__image">
                <span class="image-preview__default-text">الصورة الشخصية</span>
             </div>
              </div>
            @*صورة  بطاقة العائلة  *@
            
            <div class="form-group">
                <label>صورة من بطاقة العائلة: <span class="text-danger">*</span> </label>
                <input type="file" id="family_card_image" asp-for="family_card_image" onchange="previewImage('family_card_image','FamilyImagePreview')" name="family_card_image" class="form-control" accept="image/*" required>
             <div class="image-preview" id="FamilyImagePreview">
                
                <img src="" alt="بطاقة العائلة" class="image-preview__image">
                <span class="image-preview__default-text">بطاقة العائلة</span>
             </div>
            </div>

            
            <div class="form-group">
                <label>رقم الحساب البنكي (الراجحي فقط): <span class="text-danger">*</span></label>
                <input type="text" name="bank_account_number" asp-for="bank_account_number" class="form-control">
            </div>

            <div class="form-group" >
                <label> عدد الأبناء؟ <span class="text-danger">*</span></label>
                <select name="children_count" asp-for="children_count" class="form-control">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5+">أكثر من 4</option>
                </select>
            </div>

            <!-- هل لديك دخل أو مساعدات دورية أو ضمان اجتماعي؟ -->
            
            <div class="form-group">
                <label>هل لديك دخل أو مساعدات دورية أو ضمان اجتماعي؟ <span class="text-danger">*</span> </label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" asp-for="income_support" id="income_support_yes" type="radio" name="income_support" value="true" required>
                    <label for="income_support_yes" class="form-check-label">نعم</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input"  asp-for="income_support" id="income_support_No" type="radio" name="income_support" value="false" required>
                    <label for="income_support_No" class="form-check-label">لا</label>
                </div>
            </div>

            <!-- هل يوجد حالة إعاقة أو لأحد عائلتك؟ -->
            
            <div class="form-group" required>
                <label>هل يوجد حالة إعاقة أو لأحد عائلتك؟ <span class="text-danger">*</span> </label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" asp-for="disability" id="disability_Yes" type="radio" name="disability" value="true">
                    <label for="disability_Yes" class="form-check-label">نعم</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" asp-for="disability" id="disability_No" type="radio" name="disability" value="false">
                    <label for="disability_No" class="form-check-label">لا</label>
                </div>
                
                @* صورة اثبات الاعاقة *@
                <input class="form-control mt-2" type="file" asp-for="disability_proof"  id="disability_proof" onchange="previewImage('disability_proof','disability_image_preview')"  name="disability_proof" accept="image/*">
                 <div class="image-preview" id="disability_image_preview">
                <img src="" alt="اثبات الاعاقة " class="image-preview__image">
                <span class="image-preview__default-text">اثبات الاعاقة</span>
             </div>
            </div>

            <!-- هل يوجد أرملة أو مطلقة؟ -->
            
            <div class="form-group">
                <label>هل يوجد أرملة أو مطلقة؟ <span class="text-danger">*</span></label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" asp-for="widow" name="widow" value="true">
                    <label class="form-check-label">نعم</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio"  asp-for="widow" name="widow" value="false">
                    <label class="form-check-label">لا</label>
                </div>
            </div>

            <!-- هل يوجد كبير سن (فوق 60)؟ -->
            <div class="form-group">
                <label>هل يوجد كبير سن (فوق 60)؟ <span class="text-danger">*</span></label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" asp-for="elderly" type="radio" name="elderly" value="true">
                    <label class="form-check-label">نعم</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" asp-for="elderly" type="radio" name="elderly" value="false">
                    <label class="form-check-label">لا</label>
                </div>
            </div>

            <!-- هل يوجد دين؟ -->
            <div class="form-group">
                <label>هل يوجد دين؟ <span class="text-danger">*</span></label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" asp-for="debt" type="radio" name="debt" value="true">
                    <label class="form-check-label">نعم</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" asp-for="debt" type="radio" name="debt" value="false">
                    <label class="form-check-label">لا</label>
                </div>
                @* اثبات الدين *@
                <input class="form-control mt-2" asp-for="debt_proof" onchange="previewImage('debt_proof','debt_image_preview')" id="debt_proof" type="file" name="debt_proof" accept="image/*">
                  <div class="image-preview" id="debt_image_preview">
                <img src="" alt="اثبات الدين" class="image-preview__image">
                <span class="image-preview__default-text"> اثبات الدين </span>
             </div>
            </div>

            <!-- هل السكن ملك أو ايجار؟ -->
            <div class="form-group">
                <label>هل السكن ملك أو ايجار؟ <span class="text-danger">*</span></label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" asp-for="house_rent" type="radio"  value="true">
                    <label class="form-check-label">ايجار</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" asp-for="house_rent" type="radio" value="false">
                    <label class="form-check-label">ملك</label>
                </div>
                @* اثبات الايجار *@
                <input class="form-control mt-2" asp-for="rent_proof" type="file" onchange="previewImage('rent_proof','rentImagePreview')" id="rent_proof" name="rent_proof" accept="image/*">
                <div class="image-preview" id="rentImagePreview">
                <img src="" alt="اثبات الايجار" class="image-preview__image">
                <span class="image-preview__default-text">اثبات الايجار </span>
             </div>
            </div>


            <!-- هل يوجد شخص يستلم المساعدة بالنيابة؟ -->
            <div class="form-group">
                <label>هل يوجد شخص يستلم المساعدة بالنيابة؟ </label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" asp-for="proxy" type="radio"  value="true">
                    <label class="form-check-label">نعم</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" asp-for="proxy" type="radio"  value="false">
                    <label class="form-check-label">لا</label>
                
                        <div style="direction: rtl; text-align: right;">
                <label>الاسم:</label>
                <input type="text" asp-for="proxy_name" class="form-control">
            </div>

            <div style="direction: rtl; text-align: right;">
                <label>رقم الحساب:</label>
                <input type="text" asp-for="proxy_account_number" class="form-control">
            </div>

            </div>
            </div>

            <button type="submit" class="btn btn-primary">تسجيل</button>
        </form>
             

              
            </div>
        <div class="col-sm-2"></div>

    </div>

    @section Scripts
    {
        <script>

            @*id_image   *@
      
      /*
          const id_image_preview = document.getElementById("idImagePreview");
          const id_image_input = document.getElementById("id_image");
          const id_image = id_image_preview.querySelector(".image-preview__image");
          const id_text = id_image_preview.querySelector(".image-preview__default-text");
          id_image_input.addEventListener("change", function(){
   const fileInput = id_image_input;
            const file = fileInput.files[0];
            if(file){

                const reader = new FileReader();

                id_text.style.display = "none";
                id_image.style.display ="block";

                reader.addEventListener("load", function(){
                    console.log(this);
                    id_image.setAttribute("src", this.result)
                    @* id_image.style.width = "11.5vw",
                    id_image.style.height = "24.5vh"                     *@


                })


                reader.readAsDataURL(file);
            }

          })*/



       function previewImage(inputId, previewImageId) {
    const inputElement = document.getElementById(inputId);
    const previewElement = document.getElementById(previewImageId);
    const image = previewElement.querySelector(".image-preview__image");
    const default_text = previewElement.querySelector(".image-preview__default-text");

    const fileInput = inputElement;
    const file = fileInput.files[0];

    if (file) {
        const reader = new FileReader();

        default_text.style.display = "none";
        image.style.display = "block";

        reader.addEventListener("load", function() {
            console.log(this);
            image.setAttribute("src", this.result);
            // image.style.width = "11.5vw";
            // image.style.height = "24.5vh";
        });

        reader.readAsDataURL(file);
    }
}


        </script>


    }